---
layout: post
title: '[gitflow] gitflow 설명'
date: '2014-09-22T07:12:00.001-07:00'
author: Jung Gi Lim
tags:
- gitflow
- git
modified_time: '2014-09-22T07:12:13.275-07:00'
blogger_id: tag:blogger.com,1999:blog-2993388283610032812.post-7529501019361105201
blogger_orig_url: http://softline21c.blogspot.com/2014/09/gitflow-gitflow_22.html
---

<br />최근에 git 를 사용하면서 git branch 전략을 어떻게 할지 고민을 하다가<br />sourcetree에서 사용해본 git flow를 한번 사용해보려고 합니다.<br /><br />gitflow 설명<br />https://github.com/nvie/gitflow/wiki/Installation<br /><br />mac 에서 설치<br /><br />&nbsp;$brew install git-flow<br />해당 명령어가 가장 심플한데 root 권한 문제로 문제가 발생하였다. sudo 를 사용해도 문제가 발생해서 그냥 편안 방법으로 설치했다. 하단 설치 방법<br /><br /><pre style="background-color: #f7f7f7; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 14px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 0px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-stretch: normal; line-height: inherit; margin: 0px; padding: 0px; word-break: normal; word-wrap: normal;">curl -L -O https://raw.github.com/nvie/gitflow/develop/contrib/gitflow-installer.sh<br />sudo bash gitflow-installer.sh</code></pre><br />설치가 완료되면 git flow 명령어로 설치가 되어져 있는지 확인한다.<br /><br />$ git flow<br />usage: git flow &lt;subcommand&gt;<br /><br />Available subcommands are:<br />&nbsp; &nbsp;init &nbsp; &nbsp; &nbsp;Initialize a new git repo with support for the branching model.<br />&nbsp; &nbsp;feature &nbsp; Manage your feature branches.<br />&nbsp; &nbsp;release &nbsp; Manage your release branches.<br />&nbsp; &nbsp;hotfix &nbsp; &nbsp;Manage your hotfix branches.<br />&nbsp; &nbsp;support &nbsp; Manage your support branches.<br />&nbsp; &nbsp;version &nbsp; Shows version information.<br /><br />Try 'git flow &lt;subcommand&gt; help' for details.<br /><br /><br />이제 git flow 설치가 다 되었고 이제 개인 프로젝트를 한번 clone해서 받아보겠다.<br />$ git clone https://github.com/softlinecode/everest.git<br />$ cd everest<br /><br />현재 branch 정보를 확인해봅니다. &nbsp;기본이 master로 되어져 있을겁니다.<br />$&nbsp;git branch<br />*master<br /><br /><br />git flow 를 사용하기 위해서는 git flow init 명령어로 초기화를 할 수 있습니다.<br />각 단계별 branch 에 대해서 사용 여부를 물어 봅니다.<br />저는 그냥 엔터를 쳐서 사용안함으로 합니다.<br />기본적으로 master , develop 는 생성되고 develop 로<br />$ git flow init<br /><br />Which branch should be used for bringing forth production releases?<br />&nbsp; &nbsp;- master<br />Branch name for production releases: [master]<br />Branch name for "next release" development: [develop]<br /><br />How to name your supporting branch prefixes?<br />Feature branches? [feature/]<br />Release branches? [release/]<br />Hotfix branches? [hotfix/]<br />Support branches? [support/]<br />Version tag prefix? []<br /><br />이렇게 여러개를 하지 않으려면<br /><pre style="background-color: #f7f7f7; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 14px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; overflow: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 0px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-stretch: normal; line-height: inherit; margin: 0px; padding: 0px; word-break: normal; word-wrap: normal;">git flow init [-d]</code></pre>해당 명령어로 하면 기본 값으로 초기화 됩니다.<br /><br />해당 명령어로 생성된 branch 를 볼수 있습니다.<br />$ git branch<br />* develop<br />&nbsp; master<br /><br />이제 부터 본격적으로 git flow를 사용해서 개발을 하도록 하겠습니다.<br />우선 git flow에서는 feature 를 생성해서 개발을 시작하도록 합니다.<br />feature는 개발 및 배포 단위로 보시면 됩니다.<br /><br />test 라는 feature 를 생성하도록 하겠습니다.<br />$ git flow feature start test<br />Switched to a new branch 'feature/test'<br /><br />Summary of actions:<br />- A new branch 'feature/test' was created, based on 'develop'<br />- You are now on branch 'feature/test'<br /><br />Now, start committing on your feature. When done, use:<br /><br />&nbsp; &nbsp; &nbsp;git flow feature finish test<br /><div><br /></div><div>이렇게 하면 &nbsp;test 라는 새로운 feature 가 생성되었습니다. develop branch 기분으로 feature branch가 생성되었습니다.</div><div><div>$ git branch</div><div>&nbsp;develop</div><div>* feature/test</div><div>&nbsp; master</div></div><div><br /></div><div>변경할 코드를 변경한후 현재 상태를 확인하도록 하겠습니다.</div><div><div>$ git status</div><div># On branch feature/test</div><div># Changes not staged for commit:</div><div>#<span class="Apple-tab-span" style="white-space: pre;"> </span>modified: &nbsp; README.md</div><div>#</div><div>no changes added to commit</div></div><div><br /></div><div>특정 한 파일을 수정후 commit 을 한다.</div><div><div>$ git add .</div><div>$ git commit -m "test"</div></div><div><div>feature/test e5775f7] test</div><div>&nbsp;1 file changed, 1 insertion(+), 1 deletion(-)</div></div><div><br /></div><div>이제 commit 한 코드가 확인이 다 되었으면 develop branch로 머즈를 하기 위해서</div><div>해당 feature 를 끝내도록 합니다. git flow feature finish 명령어를 이용하면 해당</div><div>feature branch가 삭제 되고 develop로 머즈가 됩니다.</div><div><div>$ git flow feature finish test</div><div>Switched to branch 'develop'</div><div>Updating 7a5f7f6..e5775f7</div><div>Fast-forward</div><div>&nbsp;README.md | 2 +-</div><div>&nbsp;1 file changed, 1 insertion(+), 1 deletion(-)</div><div>Deleted branch feature/test (was e5775f7).</div><div><br /></div><div>Summary of actions:</div><div>- The feature branch 'feature/test' was merged into 'develop'</div><div>- Feature branch 'feature/test' has been removed</div><div>- You are now on branch 'develop'</div></div><div><br /></div><div>현재 branch 를 확인 합니다. ( feature branch가 삭제되고 develop branch로 머즈된후 설정되어져 있습니다.)</div><div><div>&nbsp;$ git branch</div><div>* develop</div><div>&nbsp; master</div></div><div><br /></div><div><br /></div><div>이제 release 작업을 위한 release branch를 생성합니다. &nbsp;git flow release start "branch name" &nbsp;을 하게 되면 develop branch 기준으로 release branch를 생성하게 됩니다.</div><div><div>$ git flow release start release.1.1</div><div>Switched to a new branch 'release/release.1.1'</div><div><br /></div><div>Summary of actions:</div><div>- A new branch 'release/release.1.1' was created, based on 'develop'</div><div>- You are now on branch 'release/release.1.1'</div><div><br /></div><div>Follow-up actions:</div><div>- Bump the version number now!</div><div>- Start committing last-minute fixes in preparing your release</div><div>- When done, run:</div><div><br /></div><div>&nbsp; &nbsp; &nbsp;git flow release finish 'release.1.1'</div></div><div><br /></div><div>현재 branch &nbsp;상태를 확인합니다. (release 로 branch가 생성되어져 있습니다.)</div><div><div>$ git branch</div><div>&nbsp; develop</div><div>&nbsp; master</div><div>* release/release.1.1</div></div><div><br /></div><div>이제 release branch 에서 확인 및 버그패치가 끝났으면 git flow release finish &nbsp;명령어로&nbsp;</div><div>master 로 머즈 되고 release.1.1 branch는 삭제 됩니다. 또한 release tag도 생성해주고 develop 에 back-merged 도 자동으로 해줍니다.</div><div><div>$ git flow release finish release.1.1</div><div>Branches 'master' and 'origin/master' have diverged.</div><div>And local branch 'master' is ahead of 'origin/master'.</div><div>Deleted branch release/release.1.1 (was e5775f7).</div><div><br /></div><div>Summary of actions:</div><div>- Latest objects have been fetched from 'origin'</div><div>- Release branch has been merged into 'master'</div><div>- The release was tagged 'release.1.1'</div><div>- Release branch has been back-merged into 'develop'</div><div>- Release branch 'release/release.1.1' has been deleted</div></div><div><br /></div><div><br /></div><div>간단하게 git flow에 대해서 설명을 하였습니다.</div><div>git 사용시 &nbsp;branch 전략을 git flow로 하면 좋을것 같고요. 아직은 테스트용으로만 사용하였지만 merge시 conflict 가 날 경우 처리에 대해서만 조금 익숙해지면 팀에서 사용할수 있는</div><div>좋은 git branch 전략이라고 생각됩니다.</div><div><br /></div><div>다음에 conflict 발생시 처리도 한번 테스트를 해보면 좋을듯 합니다.</div><div><br /></div><div><br /></div><div><br /></div><br /><br /><br />