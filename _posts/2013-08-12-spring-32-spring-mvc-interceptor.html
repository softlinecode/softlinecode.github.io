---
layout: post
title: '[Spring 3.2] Spring MVC Interceptor'
date: '2013-08-12T04:58:00.000-07:00'
author: Jung Gi Lim
tags:
- spring
- Spring MVC
modified_time: '2013-08-12T04:58:53.988-07:00'
blogger_id: tag:blogger.com,1999:blog-2993388283610032812.post-5088486476592246194
blogger_orig_url: http://softline21c.blogspot.com/2013/08/spring-32-spring-mvc-interceptor.html
---

Spring MVC 를 사용하다가 보면 필연적으로 Interceptor 를 사용하게 됩니다.<br />Controller 에서 공통적으로 또는 특정 패키지들에 속한 부분에 대해서 선후 처리가 필요하기 때문입니다.<br />예전에 이러한 부분들을 AOP 로 구현한 것을 보았습니다. 다른 부분들은 AOP 로 구현하는것이 문제가 아니지만<br />Controller 부분이라면 Interceptor로 구현하시는것을 권장합니다.<br /><br />Spring MVC 에서 interceptor 에 대해서 알아보겠습니다.<br /><br />org.springframework.web.servlet.HandlerInterceptor  ,  <br />org.springframework.web.servlet.handler.HandlerInterceptorAdapter <br />를 상속받아 Interceptor를 구현하면 됩니다.<br /><br />HandlerInterceptor 를 상속할 경우<br /><br />preHandle , postHandle , afterCompletion 이렇게 3가지로 구분되어져 있습니다.<br />이름에서 대충 알수 있겠지만<br />preHandle : Controller 가 수행되기 전에 실행됩니다. 여기서는 이후 Controller를 수행할지 여부를 boolean 으로 return 하게 됩니다.<br />postHandle : Controller 가 수행된후 View 를 호출하기 전 상태입니다.<br />afterCompletion  : View 작업까지 완료된 후 호출 됩니다. responseBody 를 이용할 경우 UI 에 이미 값을 전달후 해당 부분이 호출됩니다.<br /><br /><pre class="brush:java">package com.softline.study.interceptor;<br /><br />import javax.servlet.http.HttpServletRequest;<br />import javax.servlet.http.HttpServletResponse;<br /><br />import org.springframework.web.servlet.HandlerInterceptor;<br />import org.springframework.web.servlet.ModelAndView;<br /><br /><br />public class ControllerLoggingInterceptor implements HandlerInterceptor {<br /><br />	public boolean preHandle(HttpServletRequest request,<br />			HttpServletResponse response, Object handler) throws Exception {<br />		System.out.println("preHandle");<br />		return true;<br />	}<br /><br />	<br />	public void postHandle(HttpServletRequest request,<br />			HttpServletResponse response, Object handler,<br />			ModelAndView modelAndView) throws Exception {<br />		System.out.println("postHandle");<br />	}<br /><br />	public void afterCompletion(HttpServletRequest request,<br />			HttpServletResponse response, Object handler, Exception ex)<br />			throws Exception {<br />		System.out.println("afterCompletion");<br />	}<br /><br />}<br /></pre><br /><pre class="brush:java">package com.softline.study.interceptor;<br /><br />import javax.servlet.http.HttpServletRequest;<br />import javax.servlet.http.HttpServletResponse;<br /><br />import org.springframework.web.servlet.ModelAndView;<br />import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;<br /><br />public class TestAdapterInterceptor extends HandlerInterceptorAdapter {<br />	<br />	public void postHandle(<br />			HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)<br />			throws Exception {<br />		System.out.println("TestAdapterInterceptor.postHandle");<br />	}<br />}<br /><br /></pre><br /><br />serlvet-context.xml 에 interceptor 에 대해서 기술하면 됩니다.<br /><br /><pre class="brush:xml"><?xml version="1.0" encoding="UTF-8"?><br /><beans xmlns="http://www.springframework.org/schema/beans"<br />	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"<br />	xmlns:context="http://www.springframework.org/schema/context"<br />	xsi:schemaLocation="<br />		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd<br />		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd<br />		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd<br />	"><br /><br />	<br /><br />	<!-- default servlet mapping이 필요한 경우 사용 http://toby.epril.com/?p=1107 --><br />	<!-- 	<mvc:default-servlet-handler /> --><br /><br />	<!-- component scan 패키지 등록 stereotype 타입 scan --><br />	<context:component-scan base-package="com.softline.study" /><br />	<br />	<mvc:interceptors><br />		<bean class="com.softline.study.interceptor.ControllerLoggingInterceptor"/><br />		<bean class="com.softline.study.interceptor.TestAdapterInterceptor"/><br />	</mvc:interceptors><br />	<br /></beans><br /></pre><br />