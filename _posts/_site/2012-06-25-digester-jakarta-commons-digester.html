<br /><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">프로젝트를 하게 되면</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">언제 부터인가 XML 을 데이터 객체(bean)로 매핑해주는 작업이 항상 존재하는 것 같다.</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">Commons에서 보기만 했던 Digester를 이번에 처음으로 적용했는데 사실 이렇게 간단 할 줄을</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">몰랐다. 사실 API를 많이 살펴보지도 않고 제공해주는 샘플 코드만으로 테스트를 성공했다.</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">// CodeList.java</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">public class CodeList {<br style="margin: 0px; padding: 0px;" />&nbsp;<br style="margin: 0px; padding: 0px;" />&nbsp;private&nbsp; List&lt;Code&gt; codeList;<br style="margin: 0px; padding: 0px;" />&nbsp;<br style="margin: 0px; padding: 0px;" />&nbsp;public CodeList(){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;this.codeList = new ArrayList&lt;Code&gt;();<br style="margin: 0px; padding: 0px;" />&nbsp;}<br style="margin: 0px; padding: 0px;" />&nbsp;<br style="margin: 0px; padding: 0px;" />&nbsp;public void setCode(Code code){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;if(codeList == null){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;codeList = new ArrayList&lt;Code&gt;();<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;}<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;this.codeList.add(code);<br style="margin: 0px; padding: 0px;" />&nbsp;}<br style="margin: 0px; padding: 0px;" />&nbsp;<br style="margin: 0px; padding: 0px;" />&nbsp;public List&lt;Code&gt; getCode(){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;return codeList;<br style="margin: 0px; padding: 0px;" />&nbsp;}<br style="margin: 0px; padding: 0px;" />&nbsp;<br style="margin: 0px; padding: 0px;" />&nbsp;public int getSize(){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;if(umonCodeList == null) return 0;<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;return umonCodeList.size();<br style="margin: 0px; padding: 0px;" />&nbsp;}<br style="margin: 0px; padding: 0px;" />}</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">// Code.java</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">public class Code {<br style="margin: 0px; padding: 0px;" />&nbsp;<br style="margin: 0px; padding: 0px;" />&nbsp;private String cd;<br style="margin: 0px; padding: 0px;" />&nbsp;public setCd(String cd){</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">&nbsp; this.cd = cd;</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">&nbsp;}</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">&nbsp;public String getCd(){</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">&nbsp; return cd;</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">&nbsp;}</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">}</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">//XML sample</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><span style="color: blue;"><span class="m">&lt;?</span><span class="pi">xml version="1.0"&nbsp;</span><span class="m">?&gt;</span></span></div><div class="e" style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px;"><div class="c" style="margin-left: 1em; text-indent: -2em;"><span class="m"><span style="color: blue;">&nbsp;&nbsp; &lt;</span></span><span class="t"><span style="color: #990000;">ROWSET</span></span><span class="m"><span style="color: blue;">&gt;</span></span></div><div><div class="e"><div class="c" style="margin-left: 1em; text-indent: -2em;">&nbsp;&nbsp;&nbsp;<span class="m"><span style="color: blue;">&lt;</span></span><span class="t"><span style="color: #990000;">ROW</span></span><span class="m"><span style="color: blue;">&gt;</span></span></div><div><div class="e"><div style="margin-left: 1em; text-indent: -2em;"><span class="b"><strong><span style="color: red; font-family: 'Courier New';">&nbsp;</span></strong></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="m"><span style="color: blue;">&lt;</span></span><span class="t"><span style="color: #990000;">CD</span></span><span class="m"><span style="color: blue;">&gt;XXXX</span></span><span class="m"><span style="color: blue;">&lt;/</span></span><span class="t"><span style="color: #990000;">CD</span></span><span class="m"><span style="color: blue;">&gt;</span></span></div></div><div class="e"><div style="margin-left: 1em; text-indent: -2em;"><span class="b"><strong><span style="color: red; font-family: 'Courier New';">&nbsp;</span></strong></span>&nbsp;<span class="m"><span style="color: blue;">&lt;/</span></span><span class="t"><span style="color: #990000;">ROW</span></span><span class="m"><span style="color: blue;">&gt;</span></span></div><div style="margin-left: 1em; text-indent: -2em;"><span class="m"><span class="m"><span style="color: blue;">&nbsp;&nbsp; &lt;</span></span><span class="t"><span style="color: #990000;">ROW</span></span><span class="m"><span style="color: blue;">&gt;</span></span><div><div class="e"><div style="margin-left: 1em; text-indent: -2em;"><span class="b"><strong><span style="color: red; font-family: 'Courier New';">&nbsp;</span></strong></span>&nbsp;&nbsp;<span class="m"><span style="color: blue;">&lt;</span></span><span class="t"><span style="color: #990000;">CD</span></span><span class="m"><span style="color: blue;">&gt;TTTTT</span></span><span class="m"><span style="color: blue;">&lt;/</span></span><span class="t"><span style="color: #990000;">CD</span></span><span class="m"><span style="color: blue;">&gt;</span></span></div></div><div class="e"><div style="margin-left: 1em; text-indent: -2em;"><span class="m"><span style="color: blue;">&lt;/</span></span><span class="t"><span style="color: #990000;">ROW</span></span><span class="m"><span style="color: blue;">&gt;</span></span></div></div></div></span></div></div></div></div></div></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">//-&gt; Digester 객제를 생성한다.</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">Digester digester = new Digester();<br style="margin: 0px; padding: 0px;" />digester.setValidating(false);</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">//객체를 생성한다. ( XML 경로와 객체를 매핑한다.)</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">digester.addObjectCreate("ROWSET", CodeList.class);<br style="margin: 0px; padding: 0px;" />digester.addObjectCreate("ROWSET/ROW", Code.class);</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">//엘리먼트와 객체 변수와 매핑한다.</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">digester.addBeanPropertySetter("ROWSET/ROW/CD", "cd");</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">//하나의 객체가 세팅되면 메소드( setCode) 를 호출해서 객체를 List에 add한다.</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">digester.addSetNext("ROWSET/ROW", "setCode");</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">//가상의 url 의 response가 sample stream을 가져온다.</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">//</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">HttpClient httpClient = new HttpClient();<br style="margin: 0px; padding: 0px;" />PostMethod method = new PostMethod(<a class="con_link" href="http://xxx.com/" target="_blank">http://xxx.com</a>));</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">httpClient.executeMethod(method);</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">InputStreamReader isr = new InputStreamReader(method.getResponseBodyAsStream(), "UTF-8");</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">CodeList code = (CodeList) digester.parse(isr);</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">// CodeList 객체에 xml 값들이 객체로 세팅되어져 있음</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">Apache CommonsDigester 기능은 더 많을 지 모르겠지만 일단 제가 필요한 기능은 이정도의</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">샘플로 가능했습니다. 좀더 파워풀한 기능이 있을 것 같기도 하지만 다른 내용 공부로 인해서</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">우선 이 정도만 정리합니다. 차후에 시간날때 한번더 자세히 봐야 할 것 같습니다.</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br /></div>