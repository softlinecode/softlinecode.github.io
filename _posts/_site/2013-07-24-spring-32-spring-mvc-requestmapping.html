Spring 3.2 기준으로 Spring MVC 사용시 기본적인 내용부터 정리 한다.<br /><br />기본 환경<br />eclipse Indigo + Spring  3.2.3.RELEASE + Maven + Mysql (mongoDB)<br /><br />Spring MVC 를 하기 위해서 우선 Maven project를 생성하도록 한다.<br />Maven 프로젝트 생성 설명은 생략<br /><br />기본 Spring MVC에 필요한  POM.xml (필요한 기능이 추가되면서 계속적으로 수정)<br /><pre class="brush:xml"><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br /> xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"><br /> <modelVersion>4.0.0</modelVersion><br /> <groupId>com.softline</groupId><br /> <artifactId>study</artifactId><br /> <version>0.0.1-SNAPSHOT</version><br /> <packaging>war</packaging><br /><br /> <name>study</name><br /> <url>http://softline.com</url><br /><br /> <properties><br />  <java-version>1.6</java-version><br />  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding><br />  <org.springframework-version>3.2.3.RELEASE</org.springframework-version><br />  <!-- <org.aspectj-version>1.6.9</org.aspectj-version> --><br />  <!-- <org.slf4j-version>1.6.1</org.slf4j-version> --><br />  <!-- <commons.lang-version>2.6</commons.lang-version> --><br />  <!-- <commons.validator-version>1.3.1</commons.validator-version> --><br />  <!-- <logback-version>0.9.28</logback-version> --><br /> </properties><br /><br /> <build><br />  <finalName>${project.artifactId}</finalName><br />  <plugins><br />   <plugin><br />    <groupId>org.apache.maven.plugins</groupId><br />    <artifactId>maven-war-plugin</artifactId><br />    <configuration><br />     <warName>${project.artifactId}</warName><br />    </configuration><br />   </plugin><br />  </plugins><br /> </build><br /><br /> <dependencies><br />  <!-- spring lib --><br />  <dependency><br />   <groupId>org.springframework</groupId><br />   <artifactId>spring-context</artifactId><br />   <version>${org.springframework-version}</version><br />  </dependency><br />  <dependency><br />   <groupId>org.springframework</groupId><br />   <artifactId>spring-core</artifactId><br />   <version>${org.springframework-version}</version><br />  </dependency><br />  <dependency><br />   <groupId>org.springframework</groupId><br />   <artifactId>spring-webmvc</artifactId><br />   <version>${org.springframework-version}</version><br />  </dependency><br />  <br />  <!-- json lib --><br />  <dependency><br />   <groupId>org.codehaus.jackson</groupId><br />   <artifactId>jackson-mapper-asl</artifactId><br />   <version>1.7.1</version><br />  </dependency><br /><br />  <!-- web provided --><br />  <dependency><br />   <groupId>javax.servlet.jsp</groupId><br />   <artifactId>jsp-api</artifactId><br />   <version>2.1</version><br />   <scope>provided</scope><br />  </dependency><br /><br />  <dependency><br />   <groupId>javax.servlet</groupId><br />   <artifactId>servlet-api</artifactId><br />   <version>2.5</version><br />   <scope>provided</scope><br />  </dependency><br /><br />  <dependency><br />   <groupId>javax.servlet</groupId><br />   <artifactId>jstl</artifactId><br />   <version>1.2</version><br />  </dependency><br /><br /> </dependencies><br /></project><br /></pre><br />- Project 구조 -<br /><pre class="brush:text">#sourceFoler<br />src/main/java<br />src/main/resources<br />src/test/java<br />src/test/resources<br />#webFoler<br />src/main/webapp/WEB-INF/spring<br />src/main/webapp/WEB-INF/view<br />pom.xml<br /></pre>해당 구조는 maven spring 기본 구조<br />src/main/webapp/WEB-INF/spring 안에는 servlet-context.xml 같이 web contanier 가<br />사용하는 설정 파일이 들어가고<br />src/main/resources 안에는 application 설정 파일이 들어갑니다.<br /><br /><br />web.xml<br /><pre class="brush:xml"><?xml version="1.0" encoding="UTF-8"?><br /><web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"<br /> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br /> xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"><br /> <display-name>study</display-name><br /><br /> <context-param><br />  <param-name>contextClass</param-name>  <param-value>org.springframework.web.context.support.XmlWebApplicationContext</param-value> </context-param><br /> <br /> <context-param><br />  <param-name>contextConfigLocation</param-name>  <param-value>classpath:applicationContext.xml</param-value> </context-param><br /> <br /> <!-- Creates the Spring Container shared by all Servlets and Filters --><br /> <listener><br />  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class><br /> </listener><br /><br /> <!-- Processes application requests --><br /> <servlet><br />  <servlet-name>appServlet</servlet-name><br />  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class><br />  <init-param><br />   <param-name>contextConfigLocation</param-name>   <param-value>/WEB-INF/spring/servlet-context.xml</param-value>  </init-param><br />  <load-on-startup>1</load-on-startup><br /> </servlet><br /> <br /> <filter><br />  <filter-name>encodingFilter</filter-name><br />  <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class><br />  <init-param><br />   <param-name>encoding</param-name>   <param-value>utf-8</param-value>  </init-param><br /> </filter><br /> <br /> <filter-mapping><br />  <filter-name>encodingFilter</filter-name><br />  <url-pattern>/*</url-pattern><br /> </filter-mapping><br /> <br /> <servlet-mapping><br />  <servlet-name>appServlet</servlet-name><br />  <url-pattern>/*</url-pattern><br /> </servlet-mapping><br /> <br /></web-app><br /></pre><br />servlet-context.xml<br /><pre class="brush:xml"><?xml version="1.0" encoding="UTF-8"?><br /><beans xmlns="http://www.springframework.org/schema/beans"<br /> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"<br /> xmlns:context="http://www.springframework.org/schema/context"<br /> xsi:schemaLocation="<br />  http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd<br />  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd<br />  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd<br /> "><br /> <br /> <!--  mvc 관련 annotation  --><br /> <mvc:annotation-driven /><br /> <mvc:default-servlet-handler/><br /> <br /> <!-- component scan 패키지 등록 stereotype 타입 scan --><br /> <context:component-scan base-package="com.softline.study" /><br /><br /> <!-- ViewResolver --><br /> <bean id="internalResourceViewResolver"<br />  class="org.springframework.web.servlet.view.InternalResourceViewResolver"><br />  <property name="viewClass"><br />   <value>org.springframework.web.servlet.view.JstlView</value><br />  </property><br />  <property name="prefix"><br />   <value>/WEB-INF/view/jsp/</value><br />  </property><br />  <property name="suffix"><br />   <value>.jsp</value><br />  </property><br /> </bean><br /></beans><br /></pre>applicationContext.xml<br /><pre class="brush:xml"><?xml version="1.0" encoding="UTF-8"?><br /><beans xmlns="http://www.springframework.org/schema/beans"<br /> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br /> xmlns:context="http://www.springframework.org/schema/context"<br /> xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd<br />  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd"<br />  default-autowire="byName"><br /><br /> <br /></beans><br /></pre>Test Controller<br /><pre class="brush:java">package com.softline.study.controller;<br /><br />import org.springframework.stereotype.Controller;<br />import org.springframework.ui.Model;<br />import org.springframework.web.bind.annotation.PathVariable;<br />import org.springframework.web.bind.annotation.RequestMapping;<br />import org.springframework.web.bind.annotation.RequestMethod;<br />import org.springframework.web.bind.annotation.RequestParam;<br />import org.springframework.web.servlet.ModelAndView;<br /><br />@Controller<br />@RequestMapping("/test")<br />public class RequestMappingTestController {<br /><br /> /**<br />  * 기본 RequestMapping 방법<br />  * @return<br />  */<br /> @RequestMapping("/test")<br /> public ModelAndView test() {<br />  return new ModelAndView("test");<br /> }<br />}<br /></pre><br />@Controller<br /> --> controller 라는 spring 기본 stereotype . Spring MVC Controller 인 경우에<br />해당 annotation이 있어야 한다.<br /><br />@RequestMapping<br />--> RequestMapping 정보를 설정하는 annotation 이다.<br />      Class 상단에 위치할 경우 Method Mapping 정보 앞에 prefix 처럼 붙도록 한다.<br /><br /><br />Spring MVC 에서는 기본적으로 Model , View를 사용하도록 한다.<br />Model 은 특정한 값을 세팅하기 위한 것이고 View 는 Controller의 결과 View에 관련된<br />부분을 담당하게 된다.<br /><br />주로 ModelAndView 라는 객체를 통해서 한번에 이용하기도 한다.<br /><br />Spring MVC Controller 에서 자주 사용한 방법<br /><br />// **/test url 요청시 ModelAndView에 해당 view 정보를 담아서 return 한다.<br /><pre class="brush:java">@RequestMapping("/test")<br />public ModelAndView test() {<br /> return new ModelAndView("test");<br />}<br /></pre>// url를 다중으로 받도록 가능하다.<br /><pre class="brush:java">@RequestMapping({"/test2", "/test22"})<br />public ModelAndView test2() {<br /> return new ModelAndView("test");<br />}<br /></pre>// url를 다중으로 받도록 가능하다.<br /><pre class="brush:java">@RequestMapping({"/test2", "/test22"})<br />public ModelAndView test2() {<br /> return new ModelAndView("test");<br />}<br /></pre><br />// request method 방식 체크<br /><pre class="brush:java">@RequestMapping(value = "/test4", method = RequestMethod.GET)<br />public String test4(Model model){<br /> return "test";<br />}<br /></pre>//request 파라미터 처리 방식<br /><pre class="brush:java">@RequestMapping(value = "/test6")<br />public String test6(@RequestParam("param1") String param1, Model model){<br /> model.addAttribute("param1", param1);<br /> return "test6";<br />}<br /></pre><br />//request 파라미터 null 허용<br /><pre class="brush:java">@RequestMapping(value = "/test66")<br />public String test66(@RequestParam(value="param1",required=false) String param1, Model model){<br /> model.addAttribute("param1", param1);<br /> return "test6";<br />}<br /></pre>// REST 방식 적용 방법<br /><pre class="brush:java">@RequestMapping(value="/test9/{seq}")<br />public String test9(@PathVariable("seq") Integer seq) {<br />    return "test9";<br />}<br /></pre><br />부가 설명<br />ModelAndView 등 view 를 지정할때 ViewResolver 를 통해서 지정하게 된다.<br />servlet-context.xml 파일에 ViewResolver 설정 부분을 보면 jsp prefix 경로와 subfix 부분<br />을 보면 jsp 파일을 view 에서 어떻게 사용하는지 알수 있다.<br /><br /><br /><mvc:annotation-driven /><br />mvc 관련 annotation을 사용할 수 있도록 설정한다.<br /><br /><context:component-scan base-package="com.softline.study" /><br />Spring stereotype 에 대한 컴포넌트 스캔을 해서 사용할 bean을 등록한다.<br /><br /><br /><br /><br /><br /><br />   <br /><br />