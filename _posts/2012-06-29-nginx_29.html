---
layout: post
title: '[Nginx] HttpCoreModule 설정 정리'
date: '2012-06-29T01:46:00.000-07:00'
author: Jung Gi Lim
tags:
- nginx
modified_time: '2013-08-01T02:17:43.771-07:00'
thumbnail: http://4.bp.blogspot.com/-j8U8muTD3Y8/T-1l6J-ywTI/AAAAAAAAAEQ/qQc4M3tWpHc/s72-c/%EA%B7%B8%EB%A6%BC1.png
blogger_id: tag:blogger.com,1999:blog-2993388283610032812.post-6418926850217354752
blogger_orig_url: http://softline21c.blogspot.com/2012/06/nginx_29.html
---

Nginx의 HTTP 모듈은 http, server, location 으로 구성되어져 있습니다.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-j8U8muTD3Y8/T-1l6J-ywTI/AAAAAAAAAEQ/qQc4M3tWpHc/s1600/%EA%B7%B8%EB%A6%BC1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="328" src="http://4.bp.blogspot.com/-j8U8muTD3Y8/T-1l6J-ywTI/AAAAAAAAAEQ/qQc4M3tWpHc/s640/%EA%B7%B8%EB%A6%BC1.png" width="640" /></a></div><br />Http 는 우선 요청을 Http로 받고 그 안에 server 군을 만들면 됩니다.<br /><br />Http {<br /><span style="background-color: white;">&nbsp; &nbsp; &nbsp; &nbsp; server {</span><br /><span style="background-color: white;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;location {</span><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;location {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} ...<br /><span style="background-color: white;">&nbsp; &nbsp; &nbsp; &nbsp; }...</span><br /><span style="background-color: white;">}</span><br /><br />이런 구조라고 생각하시면 됩니다.<br /><br />보통 Http 하나에 server 도 하나일 것입니다. 하지만 도메인이 다른 서비스거나 port를 여러개 사용하는 서비스라면 server를 분리해서 처리해야 합니다.<br /><br /><br /><span style="background-color: white;"><b>1. Http</b></span><br />http 설정에 대해서 간단한 샘플을 넣어봤습니다.<br />include , default_type 은 기본 type을 정의하고요, client_max_body_size 는 요청사이즈의 max 값 입니다. 파일이나 이미지등 50M 이상은 처리하지 못하게 됩니다. &nbsp;gzip 부분은 최근에 대부분 서비스에서 성능을 위한 압축에 대한 부분입니다.<br /><br /><pre class="brush:js">&lt;br /&gt; http {&lt;br /&gt;     include       mime.types;&lt;br /&gt;     default_type  application/octet-stream;&lt;br /&gt;     client_max_body_size 50M;&lt;br /&gt;     charset utf-8;&lt;br /&gt;     sendfile        on;&lt;br /&gt;     keepalive_timeout  0;&lt;br /&gt;     gzip  on;&lt;br /&gt;     gzip_types text/javascript text/css;&lt;br /&gt;     gzip_comp_level 3;&lt;br /&gt;     gzip_vary on;&lt;br /&gt; }&lt;br /&gt;<br /></pre><br /><b>2. Server</b><br />Server 는 우선 기본적으로 port 와 도메인 이름으로 정리할수 있습니다.<br /><pre class="brush:js">&lt;br /&gt; server {&lt;br /&gt;  listen       80;&lt;br /&gt;  server_name  xxx.xxx.com;&lt;br /&gt; }&lt;br /&gt; <br /></pre><br /><b>3. Location</b><br />실제로 요청 url 에 따른 처리는 Locationo에서 하게 됩니다. 여러 가지 방식으로 요청에 대한 처리를 수행할수 있습니다. 서비스 마다 이부분을 설정해서 처리하는게 많을 것 입니다.<br /><pre class="brush:js">&lt;br /&gt;  location / {&lt;br /&gt;             root   /home1/xxx_web/;&lt;br /&gt;             index  index.jsp;&lt;br /&gt;         }&lt;br /&gt;  location = /badGateway.html {&lt;br /&gt;             root /home1/xxx_web/html/;&lt;br /&gt;         }&lt;br /&gt; <br /></pre><br />Sample 옵션<br /><pre class="brush:text">location  = / {<br /># matches the query / only.<br />[ configuration A ] <br />}<br />location  / {<br /># matches any query, since all queries begin with /, but regular<br /># expressions and any longer conventional blocks will be<br /># matched first.<br />[ configuration B ] <br />}<br />location ^~ /images/ {<br /># matches any query beginning with /images/ and halts searching,<br /># so regular expressions will not be checked.<br />[ configuration C ] <br />}<br />location ~* \.(gif|jpg|jpeg)$ {<br /># matches any request ending in gif, jpg, or jpeg. However, all<br /># requests to the /images/ directory will be handled by<br /># Configuration C.   <br />[ configuration D ] <br />}<br /></pre><br />Location 관련 정보<br />http://wiki.nginx.org/NginxHttpCoreModule#location<br /><br />참고 자료<br />http://wiki.nginx.org<br />후배 발표자료<br />