---
layout: post
title: '[Node.js] Mysql  연동'
date: '2012-06-24T20:46:00.002-07:00'
author: Jung Gi Lim
tags:
- NodeJs
modified_time: '2012-06-24T20:46:19.662-07:00'
blogger_id: tag:blogger.com,1999:blog-2993388283610032812.post-1311305917622170530
blogger_orig_url: http://softline21c.blogspot.com/2012/06/nodejs-mysql.html
---

<br /><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br class="Apple-interchange-newline" />간단하게 Mysql 연동해서 보여주는 프로그램을 작성하였습니다.</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">간단하게 mysql module 을 이용해서 DB에 연결(연결시 필요한 정보 세팅) 필요한 select 문을 하여</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">결과를 response에 전달하는 것입니다.</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br style="margin: 0px; padding: 0px;" /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">===========================================================================================</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">var http = require('http');<br style="margin: 0px; padding: 0px;" />var sys&nbsp; = require('sys');<br style="margin: 0px; padding: 0px;" />var url&nbsp; = require('url');<br style="margin: 0px; padding: 0px;" />var Client = require('mysql').Client,<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp; &nbsp; client = new Client(),<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />client.host = '10.24.29.00';<br style="margin: 0px; padding: 0px;" />client.user = 'test';<br style="margin: 0px; padding: 0px;" />client.password = 'test';<br style="margin: 0px; padding: 0px;" />client.database = 'test';<br style="margin: 0px; padding: 0px;" />client.port = '3306';<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />client.connect(function(error, results) {<br style="margin: 0px; padding: 0px;" />&nbsp; if(error) {<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp; console.log('Connection Error: ' + error.message);<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp; return;<br style="margin: 0px; padding: 0px;" />&nbsp; }<br style="margin: 0px; padding: 0px;" />});<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />http.createServer(function(req, res){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(!req.url){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sys.puts("sql not found!!");<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var uri = url.parse(req.url).pathname;<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res.writeHead(200,{'Content-Type' : 'text/plain; charset=UTF-8'});<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(!!uri){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; client.query('select * from adm_noti_list', function selectCb(err,results,fields){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(err){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw err;<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(var i in results){<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var result = results[i];<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var data = JSON.stringify(result);<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res.write(data+"\n");<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res.end();<br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br style="margin: 0px; padding: 0px;" />}).listen(9903);<br style="margin: 0px; padding: 0px;" /><br style="margin: 0px; padding: 0px;" />sys.puts("Server running at&nbsp;<a class="con_link" href="http://10.xx.xx.xxx:9903/" target="_blank">http://10.xx.xx.xxx:9903</a>");</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">===========================================================================================</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br style="margin: 0px; padding: 0px;" /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br style="margin: 0px; padding: 0px;" /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;">참조:</div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><a class="con_link" href="https://github.com/felixge/node-mysql" target="_blank">https://github.com/felixge/node-mysql</a></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br style="margin: 0px; padding: 0px;" /></div><div style="font-family: 돋움, Dotum, AppleGothic, sans-serif; font-size: 12px; line-height: 18px; padding: 0px;"><br style="margin: 0px; padding: 0px;" /></div><br class="Apple-interchange-newline" />